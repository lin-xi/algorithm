<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  <meta content="email=no" name="format-detection">
  <meta name="msapplication-tap-highlight" content="no">
  <title>insertSort</title>
  <link rel="stylesheet" type="text/css" href="./page.less">
</head>

<body>
  <h1>插入排序</h1>
  <ul>
    <h3>具体算法描述如下：</h3>
    <li> 从第一个元素开始，该元素可以认为已经被排序</li>
    <li> 取出下一个元素，在已经排序的元素序列中从后向前扫描</li>
    <li> 如果该元素（已排序）大于新元素，将该元素移到下一位置</li>
    <li> 重复步骤3，直到找到已排序的元素小于或者等于新元素的位置</li>
    <li> 将新元素插入到该位置后</li>
    <li> 重复步骤2~5</li>
  </ul>
  <pre>
    <code>
    function bubbleSort(arr: Array<number>): [Array<number>, number] {
      let cnt: number = 0
      for (let i: number = arr.length - 1; i > 0; i--) {
        cnt++;
        for (let j: number = 0; j < i; j++) {
          cnt++;
          if (arr[j] > arr[j + 1]) {
            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]]
          }
        }
      }
      return [arr, cnt]
    }
    </code>
  </pre>
  <div class="playground">
    <div class="edit">
      <p>输入：</p>
      <textarea id="input">5,39,9,32,20,25,18,3,40,23,45,26,16,1,44,0,46,33,2,28,49,24,15,31,41,27,38,6,47,14,12,36,11,7,21,42,19,9,50,34,48,37,10,22,13,4,8,17,29,30,43,35</textarea>
      <a class="button">100000次 排序</a>
    </div>
    <div class="view">
      <div>
        <p>结果：</p>
        <textarea id="result"></textarea>
      </div>
      <div>
        耗时：
        <span id="time"></span>
        循环次数：
        <span id="count"></span>
      </div>
    </div>
  </div>
  <script src="./insertSort.ts"></script>
  <script type="text/javascript">

    document.querySelector('.button').addEventListener('click', () => {
      let start = Date.now()
      let result;

      for (let i = 0; i < 100000; i++) {
        let arr = document.querySelector('#input').value.split(',')
        arr = arr.map(item => {
          return parseInt(item)
        })
        result = window.insertSort(arr)
      }
      document.querySelector('#result').innerText = result[0].join(',')
      document.querySelector('#time').innerText = (Date.now() - start) / 100000
      document.querySelector('#count').innerText = result[1]

    })
  </script>

</body>

</html>